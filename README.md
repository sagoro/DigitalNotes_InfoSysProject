# YpoxreotikiErgasia22_e16001_Agoropoulos_Stelios
Εργασία εξαμήνου για το μάθημα "Πληροφοριακά Συστήματα" Εαρινό 2022 - Αγορόπουλος Στέλιος e16001


# Λειτουργίες συστήματος

Παρακάτω 

## Authentication Scheme & Session Management

Στο συγκεκριμένo σύστημα, υποστηρίζεται HTTP Basic Authentication. 

Για την χρήση των υπηρεσιών του συστήματος από έναν χρήστης είναι απαραίτητο αρχικά να έχει λογαριασμό στο σύστημα και να έχει πραγματοποιήσει είσοδο σε αυτό. Μόλις πραγματοποιήσει επιτυχή είσοδο θα δημιουργηθεί ένα session και το σύστημα θα του επιστρέψει το παρακάτω response : 

```json
{
    "Authorization Key": "aa1ea2e6-f86c-11ec-81e3-0242ac180003",
    "username": "admin@infosys.gr",
    "message": "Login successful!"
}
```

Στη συνέχεια, **για τα endpoints στα οποία απαιτείται authorization header**, ο χρήστης θα πρέπει να δώσει στα request headers το Authorization Key του όπως εμφανίζεται στο παρακάτω παράδειγμα: 
```JSON
"Authorization" : "aa1ea2e6-f86c-11ec-81e3-0242ac180003"
```

Ένα session διαρκεί μέχρι ο χρήστης να πραγματοποιήσει έξοδο από το σύστημα, ή το σύστημα να ακυρώσει το session.


### Authorization Header Missing
Σε περίπτωση που ένας χρήστης ή διαχειριστής προσπαθήσει να χρησιμοποιήσει endpoint το οποίο απαιτεί authorization και λείπει το header, το σύστημα θα επιστρέψει το παρακάτω response :
```JSON
"Authorization key is missing. Please pass session_id in Authorization header."
```
Παράδειγμα λειτουργίας : https://prnt.sc/pbOG-blJyy9h


### No active session for provided key
Σε περίπτωση που ένας χρήστης ή διαχειριστής προσπαθήσει να χρησιμοποιήσει endpoint και το ***Authorization Key*** του δεν εντοπιστεί στα active sessions θα εμφανιστεί το παρακάτω μήνυμα : 
```JSON
"No active session. Please login"
```
Παράδειγμα λειτουργίας : https://prnt.sc/vOnUo4Su9XLr


### Premissions 
Για την χρήση των Endpoints υπάρχουν δύο ειδών εξουσιοδοτήσεις : 
- Required Permissions : Admin
- Required Permissions : Users

Οι χρήστες μπορούν να χρησιμοποιήσουν μόνο τα endpoints που απαιτούν Users permissions, ενώς οι admin αντίστοιχα μπορούν να χρησιμοποιήσουν μόνο τα endpoints που απαιτούν Admin permissions αντίστοιχα.

Σε περίπτωση που ένας χρήστης προσπαθήσει να χρησιμοποιήσει endpoints που απαιτούν admin permissionsθα θα λάβει το παρακάτω Reponse :
```json
"This service is available only for admins."
```

Σε περίπτωση που ένας διαχειριστής προσπαθήσει να χρησιμοποιήσει endpoints που απαιτούν users permissionsθα λάβει το παρακάτω Reponse :
```json
"This service is available only for users."
```

## Εγγραφή στο σύστημα (Register)

Μέσα από το συγκεκριμένο resource, οι ενδιαφερόμενοι χρήστες μπορούν να πραγματοποιήσουν την εγγραφή τους στο πληροφοριακό σύστημα.

**Resources:**
| Method | Resource | Description |
| :----- |  :----- | :----- |
| POST | /register | Register a user in the system. | 


**Request Body Schema**
```json
 {
	"email" : "sagoropoulos@gmail.com",
	"firstName" : "Stelios", 
	"surName" : "Agoropoulos",
	"password" : "pass"
}
```

Ένας χρήστης μπορεί να πραγματοποιήσει την εγγραφή του στο σύστημα, ώστε να μπορεί στη συνέχεια να χρησιμοποιεί τις διαθέσιμες υπηρεσίες.
Για να μπορέσει ο χρήστης να πραγματοποιήσει με επιτυχία την εγγραφή του, είναι απαραίτητο να εισάγει τα παρακάτω στοιχεία : 
- Email
- Κωδικό πρόσβασης (password)
- Όνομα
- Επώνυμο

***Θεωρούμε ότι το username του χρήστη είναι το email του.***

Αν τα στοιχεία που δόθηκαν είναι σωστά και το email(username) δεν ανιτστοιχεί σε κάποιον άλλον χρήστη τότε η εγγραφή θα πραγματοποιηθεί με επιτυχία.
Σε περίπτωση που το σύστημα εντοπίσει ότι το email που δόθηκε αντιστοιχεί σε κάποιον χρήστη, θα επιστρέψει κατάλληλο μήνυμα.




## Είσοδος στο σύστημα (Login)


Με το συγκεκριμένο resource, οι εγγεγραμμένοι χρήστες μπορούν να πραγματοποιήσουν την είσοδό τους στο πληροφοριακό σύστημα.

**Endpoint**
<pre>
<b>POST</b> /login
</pre>

==Auth required : NO==

> **Auth required** : NO

**Request Body Schema**
```json
 {
	"email" : "sagoropoulos@gmail.com",
	"password" : "pass", 
}
```

**Απλός χρήστης**<br/>
: Ο χρήστης εφόσον έχει πραγματοποιήσει την εγγραφή του, μπορεί να κάνει απόπειρα εισόδου στο σύστημα. Σε περίπτωση που το email δεν αντιστοιχεί σε κάποιον χρήστη, η υπηρεσία θα ενημερώσει με κατάλληλο μήνυμα.
Επίσης, αν ο κωδικός είναι λάθος, τότε το endpoint θα επιστρέψει το αντίστοιχο μήνυμα.

: Σε περίπτωση που τα στοιχεία που δώσει είναι σωστά (email & κωδικός), τότε
θα εισέλθει επιτυχώς στο σύστημα, θα ενημερωθεί κατάλληλα και το σύστημα θα του επιστρέψει το ***session_id*** του, ώστε να μπορεί να το χρησιμοποιεί για το Authorization του στις 
υπόλοιπες υπηρεσίες του συστήματος.

**Διαχειριστής**<br/>
: Για την είσοδο ενός διαχειριστή, ισχύουν τα παραπάνω που αφορούν και τους απλούς χρήστες. Επιπλέον όμως, όταν ένας διαχειριστής κάνει είσοδο στο σύστημα για πρώτη φορά, θα του ζητηθεί να 
αλλάξει τον προσωρινό κωδικό του. Σε περίπτωση που δεν τον αλλάξει και συνδεθεί ξανά (και ας μην είναι η πρώτη φορά), θα γίνει εκ νέου υπενθύμιση για αλλαγή κωδικού.
Η υπενθύμιση θα σταματήσει να εμφανίζεται, όταν ο διαχειριστής αλλάξει τον προσωρινό κωδικό του.


### Παραδείγματα εκτέλεσης

Επιτυχής είσοδος : https://prnt.sc/M79Cf9B-tfYX

Λανθασμένος κωδικός : https://prnt.sc/Oyi_8M2ag3Uc

Υπάρχει ήδη ενεργή σύνδεση : https://prnt.sc/VsEIBkV1DfoD

Δεν υπάρχει ο χρήστης : https://prnt.sc/4GrKpLJKTUh-


## Αλλαγή κωδικού (Password Reset)
Οι χρήστες και οι διαχειριστές μπορούν να αλλάξουν τον κωδικό πρόσβασης τους.

**Endpoint**
<pre>
<b>PUT</b> /passwordReset
</pre>

Authorization & Permission
: **Authοrization required** : YES
: **Permissions required** : Admin or User

**Required Headers**
```js
 {
	"Authorization" : session_id (provided by system after succesful login)
}
```

**Request Body Schema**
```json
 {
	"oldPass" : "1234",
	"newPass" : "123456", 
	"confirmPass" : "123456",
}
```

Για την επιτυχή αλλαγή του κωδικού, θα πρέπει ο παλιός κωδικός να είναι ίδιος με αυτόν που έχει δώσει ο χρήστης στο request του, ο παλιός κωδικός του body να διαφέρει από τον νέο και τέλος ο νέος κωδικός να είναι ίδιος με το password confirmation. Σε οποιαδήποτε περίπτωση λάθους, το μήνυμα επιστρέφει το κατάλληλο μήνυμα.

### Παραδείγματα εκτέλεσης

Επιτυχία εύρεση σημείωσης/σημειώσεων : 

Αποτυχία εύρεσης σημείωσης/σημειώσεων :


## Έξοδος από το σύστημα (Logout)

Με το συγκεκριμένο resource, οι χρήστες μπορούν να πραγματοποιήσουν έξοδο από το πληροφοριακό σύστημα.

**Endpoint**
<pre>
<b>POST</b> /logout
</pre>

**Required Headers**
```js
 {
	"Authorization" : session_id (provided by system after succesful login)
}
```

Σε περίπτωση που ένας χρήστης θέλει να πραγματοποιήσει έξοδο από το σύστημα, μπορεί να χρησιμοποιήσει το συγκεκριμένο endpoint.</br>
**Είναι απαραίτητη η χρήστη του Authorization Header**.</br>

Αν ο χρήστης δεν έχει πραγματοποιήσει είσοδο στο σύστημα και προσπαθήσει να κάνει logout θα του εμφανιστεί το κατάλληλο μήνυμα. </br>
Σε περίπτωση που η έξοδος από το σύστημα πραγματοποιηθεί με επιτυχία, ο χρήστης θα ενημερωθεί αντίστοιχα.


[comment]: <> (ADD NOTE)


## Διαγραφή λογαριασμού & δεδομένων (Delete Account)

Διαγραφή του λογαριασμού του και των δεδομένων του από έναν χρήστη.

**Endpoint**
<pre>
<b>DELETE</b> /deleteAccount
</pre>

Authorization & Permission
: **Authοrization required** : YES
: **Permissions required** : User

**Required Headers**
```json
 {
	"Authorization" : session_id (provided by system after succesful login)
}
```

Ένας χρήστης μπορεί να πραγματοποιήσει διαγραφή του λογαριασμού και των δεδομένων του..
Το σύστημα αναγνωρίζει τον χρήστη βάσει του ***Authorization Key*** του και προχωράει στην διαγραφή του λογαριασμού του από την βάση καθώς και όλων των δεδομένων του και επιστρέφει το κατάλληλο μήνυμα.

### Παραδείγματα εκτέλεσης

Επιτυχής διαγραφή χρήστη και δεδομένων : 


## Δημιουργία σημείωσης (Add Note)

Με το συγκεκριμένο resource, ένας χρήστης μπορεί δημιουργήσει μια σημείωση.

**Endpoint**
<pre>
<b>POST</b> /notes/add
</pre>

**Auth required** : YES

**Required Headers**
```json
 {
	"Authorization" : session_id (provided by system after succesful login)
}
```

**Request Body Schema**
```json
 {
	"title" : "My first note!",
	"content" : "This is a dummy note.", 
	"tags" : "Tag1,Tag2,Tag3"
}
```

Ένας χρήστης μπορεί να δημιουργήσει μια σημείωση, ώστε να μπορεί στην συνέχεια να την βρει στο σύστημα.
Για την δημιουργία μιας είναι απαραίτητο να εισάγει τα παρακάτω στοιχεία : 
- Τίτλος
- Περιεχόμενο
- Λέξεις κλειδιά (tags) οι οποίες θα είναι χωρισμένες με κόμμα 

Σε περίπτωση που το request body δεν καλύπτει το απαιτούμενο schema όπως περιγράφεται παραπάνω, το σύστημα δεν θα προχωρήσει στην δημιουργία σημείωσης και θα επιστρέψει κατάλληλο μήνυμα.
Αν το request body περιέχει όλα τα απαραίτητα στοιχεία, η σημείωση θα δημιουργηθεί και θα επιστραφεί το αντίστοιχο μήνυμα.


## Αναζήτηση σημείωσης με τίτλο (Search Note by Title)


Αναζήτηση σημείωσης βάσει του τίτλου της.

**Endpoint**
<pre>
<b>POST</b> /notes/search/<b>{title}</b>
</pre>

**Options:**
| Name | Type | Description |
| :----- |  :----- | :----- |
| title | String | A string with note's title. | 

**Required Request Headers**
```json
 {
	"Authorization" : session_id (provided by system after succesful login)
}
```

Ένας χρήστης μπορεί να αναζητήσει μια ή περισσότερες σημειώσεις βάσει τίτλου.
Με αυτό τον τρόπο θα μπορέσει να πάρει και το μοναδικό ID της κάθε σημείωσης, ώστε στη συνέχεια να μπορέσει να πραγματοποιήσει επιπλέον ενέργειες (update, delete etc.)
Για την αναζήτηση της σημείωσης θα πρέπει ο χρήστης στο endpoint να δώσει και τον τίτλο της σημείωσης.
Στη συνέχεια το σύστημα θα επιστρέψει όλες τις σημειώσεις που έχουν τον τίτλο που δόθηκε. Σε περίπτωση που δεν υπάρχει σημείωση, θα επιστραφεί κενό.

### Παραδείγματα εκτέλεσης

Επιτυχία εύρεση σημείωσης/σημειώσεων : 

Αποτυχία εύρεσης σημείωσης/σημειώσεων :



## Αναζήτηση σημείωσης με λέξει κλειδί (Search Note by Tag)

Αναζήτηση των σημειώσεων που περιέχουν μια συγκεκριμένη λέξη κλειδί.

**Endpoint**
<pre>
<b>POST</b> /notes/searchByTag/<b>{tag}</b>
</pre>

**Parameters:**
| Name | Type | Description |
| :----- |  :----- | :----- |
| tag | String | A string with tag you want to search. | 

**Required Headers**
```json
 {
	"Authorization" : session_id (provided by system after succesful login)
}
```

Ένας χρήστης μπορεί να αναζητήσει μια ή περισσότερες σημειώσεις βάσει μιας λέξης κλειδί.
Για την αναζήτηση της σημείωσης θα πρέπει ο χρήστης στο endpoint να δώσει και την λέξει κλειδί για την οποία θέλει να πραγματοποιήσει την αναζήτηση.
Στη συνέχεια το σύστημα θα επιστρέψει όλες τις σημειώσεις που περιέχουν την ζητούμενη λέξη κλειδί **σε φθίνουσα σειρά βάσει της ημερομηνίας δημιουργίας** (πιο πρόσφατες προς πιο παλιές). Σε περίπτωση που δεν υπάρχει σημείωση που να ικανοποιεί την αναζήτησή, θα επιστραφεί κατάλληλο μήνυμα.

### Παραδείγματα εκτέλεσης

Επιτυχία εύρεση σημείωσης/σημειώσεων : 

Αποτυχία εύρεσης σημείωσης/σημειώσεων :



## Διόρθωση/αλλαγή υπάρχουσας σημείωσης (Update note)

Διόρθωση/αλλαγή των πεδίων μιας υπάρχουσαν σημείωσης

**Endpoint**
<pre>
<b>PATCH</b> /notes/update/<b>{id}</b>
</pre>

**Parameters:**
| Name | Type | Description |
| :----- |  :----- | :----- |
| id | hex | Note's id. Provided by "Search by Title" endpoint. | 

**Required Headers**
```json
 {
	"Authorization" : session_id (provided by system after succesful login)
}
```

**Request Body Example 1**
```json
 {
	"title" : "My first note!",
	"content" : "This is a dummy note.", 
}
```

**Request Body Example 2**
```json
 {
	"tags" : "Tag1,Tag2,Tag3"
}
```

Ένας χρήστης μπορεί να πραγματοποιήσει αλλαγή σε **οποιαδήποτε** από τις τρείς παρακάτω τιμές μιας σημείωσης: 
: Τίτλος σημείωσης
: Περιεχόμενο
: Λέξεις κλειδιά

Για την εύρεση και διόρθωση της σημείωσης που επιθυμεί ο χρήστης **θα πρέπει στο endpoint να δώσει το id** (μπορεί να το βρει από το "Search by Title" endpoint).
Σε περίπτωση που δεν βρεθεί σημείωση με το δοθέν id, τότε το σύστημα θα επιστρέψει και πάλι στον χρήστη το κατάλληλο μήνυμα.
Στη συνέχεια θα πρέπει να πραγματοποιήσει ένα request που να περιέχει τουλάχιστον ένα από τα τρια πεδία.Αν το Request Body δεν περιέχει κανένα από τα τρία πεδία, τότε το σύστημα θα επιστρέψει το κατάλληλο μήνυμα λάθους.
Αν η διαδικασία ολοκληρωθεί κανονικά, εμφανίζεται μήνυμα επιτυχίας.

### Παραδείγματα εκτέλεσης

id is missing : 

Το id δεν είναι valid(hex or 24digit)) : 

Το Request Body δεν καλύπτει το schema : 

Η σημείωση έγινε update με επιτυχία : 

Δεν βρέθηκε η σημείωση που ζητήθηκε : 






## Διαγραφή σημείωσης (Delete note)

Διαγραφή μιας σημείωσης του χρήστη από το σύστημα.

**Endpoint**
<pre>
<b>DELETE</b> /notes/delete/<b>{id}</b>
</pre>

**Parameters:**
| Name | Type | Description |
| :----- |  :----- | :----- |
| id | 24-digit hex | Note's id. Provided by "Search by Title" endpoint. | 

**Required Headers**
```json
 {
	"Authorization" : session_id (provided by system after succesful login)
}
```

Ένας χρήστης μπορεί να πραγματοποιήσει διαγραφή μιας σημείωσης του.
Για την εύρεση και διαγραφή της σημείωσης που επιθυμεί ο χρήστης **θα πρέπει στο endpoint να δώσει το id** (μπορεί να το βρει από το "Search by Title" endpoint).
Σε περίπτωση που δεν βρεθεί σημείωση με το δοθέν id, τότε το σύστημα θα επιστρέψει και πάλι στον χρήστη το κατάλληλο μήνυμα.
Αν η διαδικασία ολοκληρωθεί κανονικά, εμφανίζεται μήνυμα επιτυχίας.

### Παραδείγματα εκτέλεσης

id is missing : 

Το id δεν είναι valid(24-digit hex) : 

Δεν βρέθηκε η σημείωση που ζητήθηκε : 

Η σημείωση διαγράφηκε με επιτυχία : 



## Εύρεση όλων των σημειώσεων του χρήστη (Get All Notes)

Εύρεση όλων των σημειώσεων που έχει δημιουργήσει ο χρήστης.

**Endpoint**
<pre>
<b>GET</b> /notes/getAll/<b>{sortType}</b>
</pre>

**Parameters:**
| Name     |  Type     |   Values  |                Description                        |
| :-----   |  :-----   |  :-----   | :----- 											  |
| sortType |  String   | asc, desc | Note's id. Provided by "Search by Title" endpoint.|

**Required Headers**
```json
 {
	"Authorization" : session_id (provided by system after succesful login)
}
```

Ένας χρήστης μπορεί να πραγματοποιήσει αναζήτηση όλων των σημειώσεων του.
Είναι απαραίτητο ο χρήστης να επιλέξει την χρονολογική σειρά με την οποία θα εμφανίζονται οι σημειώσεις τους, δίνοντας το κατάλληλο parameter. Οι επιλογές είναι οι εξής : 
: asc : ASCENDING->ταξινόμηση από την πιο παλιά προς τις νεότερες
: desc : DESCENDING -> ταξινόμηση από τις νεότερες προς τις πιο παλιές

Σε περίπτωση που δεν βρεθούν σημειώσεις, το σύστημα θα επιστρέψει ένα κενό payload. Διαφορετικά θα επισρέψει όλες τις σημειώσεις του χρήστη, ταξινομημένες σύμφωνα με την επιλογή του.

### Παραδείγματα εκτέλεσης

sortType is missing : 

Δεν βρέθηκαν σημειώσεις : 

Επιτυχής εύρεση σημειώσεων : 



# Admin Operations
Παρακάτω ακολουθεί περιγραφή των endpoints που μπορούν να χρησιμοποιηθούν από τους διαχειριστές.

### Διαθέισμα Endpoints
: POST /addAdmin
: DELETE /deleteUser/{email}

## Εισαγωγή νέου διαχειριστή (Add Admin)

Με το συγκεκριμένο resource, ένας διαχειριστής μπορεί να εισάγει έναν νέο διαχειριστή στην υπηρεσία.

**Endpoint**
<pre>
<b>POST</b> /addAdmin
</pre>

Authorization & Authentication
: **Auth required** : YES
: **Permissions required** : Admin


**Required Headers**
```json
 {
	"Authorization" : session_id (provided by system after succesful login)
}
```

**Request Body Schema**
```json
 {
	"email" : "admin2@infosys.gr",
	"firstName" : "John", 
	"surName" : "Doe"
}
```

Ένας διαχειριστής μπορεί να εισάγει έναν νέο διαχειριστή στο σύστημα.
Για την εισαγωγή είναι απαραίτητα τα παρακάτω στοιχεία : 
- Email
- Όνομα
- Επώνυμο

Σε περίπτωση που το request body δεν καλύπτει το απαιτούμενο schema όπως περιγράφεται παραπάνω, το σύστημα δεν θα προχωρήσει στην δημιουργία του λογαριασμού διαχειριστεί και θα επιστρέψει κατάλληλο μήνυμα.
Αν το Request body  γίνει αποδεκτό, γίνεται validation του email format. Σε περίπτωση που το format είναι λανθασμένο, εμφανίζεται αντίστοιχο μήνυμα.
Σε περίπτωση που το email που δόθηκε αντιστοιχεί σε κάποιον διαχειριστή, τότε θα εμφανιστεί και πάλι το κατάλληλο μήνυμα.
Μόλις όλοι οι έλεγχοι ολοκληρωθούν με επιτυχία δημιουργείται ο νέος λογαριασμός του διαχειριστή με έναν προσωρινό κωδικό και flag για password reset. 





## Διαγραφή χρήστη (Delete user)

Οι διαχειριστές μπορούν να προχωρήσουν στην διαγραφή του λογαριασμού ενός χρήστη.

**Endpoint**
<pre>
<b>DELETE</b> /deleteUser<b>{email}</b>
</pre>

Authorization & Authentication
: **Auth required** : YES
: **Permissions required** : Admin

**Parameters:**
| Name | Type | Description |
| :----- |  :----- | :----- |
| email | String | User's email to delete account | 

**Required Headers**
```json
 {
	"Authorization" : session_id (provided by system after succesful login)
}
```

Οι διαχειριστές μπορούν να προχωρήσουν στην διαγραφή του λογαριασμού ενός χρήστη.
Για την εύρεση και διαγραφή του λογαριασμού του χρήστης, ο διαχειριστής **θα πρέπει στο endpoint να δώσει το email του χρήστη** που επιθυμεί να διαγράψει.
Σε περίπτωση που δεν βρεθεί ο χρήστης με το δοθέν email/username, τότε το σύστημα θα επιστρέψει το κατάλληλο μήνυμα.
Αν η διαδικασία ολοκληρωθεί κανονικά, επιστρέφεται μήνυμα επιτυχίας.

### Παραδείγματα εκτέλεσης

id is missing : 

Το id δεν είναι valid(24-digit hex) : 

Δεν βρέθηκε η σημείωση που ζητήθηκε : 
